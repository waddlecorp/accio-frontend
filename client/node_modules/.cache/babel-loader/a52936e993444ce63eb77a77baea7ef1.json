{"ast":null,"code":"var _jsxFileName = \"/workspace/sorigpt/client/src/components/Chat/Chat.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useRef } from 'react';\nimport TextField from '@mui/material/TextField';\nimport Button from '@mui/material/Button';\nimport List from '@mui/material/List';\nimport Container from '@mui/material/Container';\nimport Stack from '@mui/material/Stack'; //import Grid from '@mui/material/Grid';\n//import { IconButton } from '@mui/material';\n//import SendIcon from '@mui/icons-material/Send';\n\nimport { FiSend } from 'react-icons/fi';\nimport Message from '../Message';\nimport style from './Chat.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Chat = _ref => {\n  _s();\n\n  let {\n    messages,\n    submitMessage,\n    myId,\n    isGeneratingAnswer\n  } = _ref;\n  const [input, setInput] = useState('');\n  const [inputHeight, setInputHeight] = useState(0);\n  const messagesEndRef = useRef(null);\n\n  const onChange = e => {\n    setInput(e.currentTarget.value);\n    setInputHeight(e.currentTarget.scrollHeight);\n  };\n\n  const handleKeyPress = e => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n\n      if (isGeneratingAnswer) {\n        return;\n      }\n\n      onClick();\n    }\n  };\n\n  const onClick = () => {\n    if (isGeneratingAnswer) {\n      return;\n    }\n\n    submitMessage(input);\n    setInput('');\n  };\n\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre, _messagesEndRef$curre2;\n\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"auto\"\n    });\n    (_messagesEndRef$curre2 = messagesEndRef.current) === null || _messagesEndRef$curre2 === void 0 ? void 0 : _messagesEndRef$curre2.scrollBy(0, inputHeight);\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages, inputHeight]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    className: style.Chat__wrapper,\n    children: [messages.length === 0 && /*#__PURE__*/_jsxDEV(Stack, {\n      direction: \"row\",\n      sx: {\n        mb: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"md\",\n        sx: {\n          bgcolor: 'info.main',\n          color: 'info.contrastText',\n          p: 2,\n          borderRadius: 1,\n          height: \"100px\",\n          position: 'relative',\n          top: '500px',\n          width: \"25%\",\n          marginLeft: '80px'\n        },\n        children: \"WOW 1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"md\",\n        sx: {\n          bgcolor: 'info.main',\n          color: 'info.contrastText',\n          p: 2,\n          borderRadius: 1,\n          height: \"100px\",\n          position: 'relative',\n          top: '500px',\n          width: \"25%\"\n        },\n        children: \"WOW 2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"md\",\n        sx: {\n          bgcolor: 'info.main',\n          color: 'info.contrastText',\n          p: 2,\n          borderRadius: 1,\n          height: \"100px\",\n          position: 'relative',\n          top: '500px',\n          width: \"25%\",\n          marginRight: '80px'\n        },\n        children: \"WOW 3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(List, {\n      className: style.Chat__list,\n      children: [messages.map((_ref2, index) => {\n        let {\n          userId,\n          message\n        } = _ref2;\n        return /*#__PURE__*/_jsxDEV(Message, {\n          userId: userId,\n          myId: myId,\n          text: message,\n          showName: !index || messages[index - 1].userId !== userId\n        }, `${userId}_${index}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 10\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Stack, {\n      direction: \"row\",\n      className: style.Chat__input,\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        className: style.Chat__input__textfield,\n        onChange: onChange,\n        value: input //placeholder=\"메시지를 입력하세요.\"\n        ,\n        onKeyPress: handleKeyPress,\n        multiline: true,\n        minRows: 1,\n        maxRows: 5,\n        style: {\n          height: inputHeight\n        },\n        InputProps: {\n          endAdornment: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: onClick,\n            variant: \"contained\",\n            color: \"primary\",\n            className: style.Chat__input__button,\n            sx: {\n              minWidth: '2rem',\n              minHeight: '2rem',\n              position: 'absolute',\n              right: '5px',\n              bottom: '12px'\n            },\n            children: [\" \", /*#__PURE__*/_jsxDEV(FiSend, {\n              color: \"grey\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 7\n          }, this)\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"secondary\",\n        className: style.Chat__button_restart,\n        sx: {\n          minWidth: '2rem',\n          minHeight: '2rem',\n          position: 'absolute',\n          right: '50%',\n          transform: 'translateX(50%)',\n          top: '-50px'\n        },\n        children: \"RESTART\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Chat, \"Uq0aTWH5vvcpB0USDw9wFTOMIUM=\");\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["useState","useEffect","useRef","TextField","Button","List","Container","Stack","FiSend","Message","style","Chat","messages","submitMessage","myId","isGeneratingAnswer","input","setInput","inputHeight","setInputHeight","messagesEndRef","onChange","e","currentTarget","value","scrollHeight","handleKeyPress","key","preventDefault","onClick","scrollToBottom","current","scrollIntoView","behavior","scrollBy","Chat__wrapper","length","mb","bgcolor","color","p","borderRadius","height","position","top","width","marginLeft","marginRight","Chat__list","map","index","userId","message","Chat__input","Chat__input__textfield","endAdornment","Chat__input__button","minWidth","minHeight","right","bottom","Chat__button_restart","transform"],"sources":["/workspace/sorigpt/client/src/components/Chat/Chat.jsx"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\n\nimport TextField from '@mui/material/TextField';\nimport Button from '@mui/material/Button';\nimport List from '@mui/material/List';\nimport Container from '@mui/material/Container';\nimport Stack from '@mui/material/Stack';\n//import Grid from '@mui/material/Grid';\n\n//import { IconButton } from '@mui/material';\n//import SendIcon from '@mui/icons-material/Send';\nimport { FiSend } from 'react-icons/fi';\n\nimport Message from '../Message';\nimport style from './Chat.module.scss';\n\nconst Chat = ({ messages, submitMessage, myId, isGeneratingAnswer }) => {\n    const [input, setInput] = useState('');\n\tconst [inputHeight, setInputHeight] = useState(0);\n    const messagesEndRef = useRef(null);\n\n    const onChange = (e) => {\n\t\tsetInput(e.currentTarget.value);\n\t\tsetInputHeight(e.currentTarget.scrollHeight);\n    }\n    \n\tconst handleKeyPress = (e) => {\n        if (e.key === \"Enter\") {\n            e.preventDefault();\n            if (isGeneratingAnswer) {\n                return;\n            }\n            onClick();\n        }\n    };\n\t\n\tconst onClick = () => {\n\t\tif (isGeneratingAnswer) {\n\t\t\treturn;\n\t  \t}\n\t  \tsubmitMessage(input);\n\t\tsetInput('');\n\t}\n\t\n    const scrollToBottom = () => {\n\t\tmessagesEndRef.current?.scrollIntoView({ behavior: \"auto\" });\n\t\tmessagesEndRef.current?.scrollBy(0, inputHeight);\n\t};\n    \n    useEffect(() => {\n        scrollToBottom();\n    }, [messages, inputHeight]);\n\n    return (\n        <Container maxWidth=\"md\" className={style.Chat__wrapper}>\t\n\t\t\t{messages.length === 0 && (\n\t\t\t\t<Stack direction=\"row\" sx={{ mb: 1 }}>\n\t\t\t\t\t<Container maxWidth=\"md\" \n\t\t\t\t\t\tsx={{ bgcolor: 'info.main', color: 'info.contrastText', p: 2, borderRadius: 1, height: \"100px\", position: 'relative', top: '500px', width: \"25%\", marginLeft: '80px'}}>\n                        WOW 1\n                    </Container>\n                    <Container maxWidth=\"md\" \n\t\t\t\t\t\tsx={{ bgcolor: 'info.main', color: 'info.contrastText', p: 2, borderRadius: 1, height: \"100px\", position: 'relative', top: '500px', width: \"25%\"}}>\n                        WOW 2\n                    </Container>\n                    <Container maxWidth=\"md\" \n\t\t\t\t\t\tsx={{ bgcolor: 'info.main', color: 'info.contrastText', p: 2, borderRadius: 1, height: \"100px\", position: 'relative', top: '500px', width: \"25%\", marginRight: '80px'}}>\n                        WOW 3\n                    </Container>\n                </Stack>\n\t\t\t)}\n\t\t\t\n\t\t\t<List className={style.Chat__list} >\n\t\t\t\t{messages.map(({userId, message}, index) => \n\t\t\t\t\t\t\t  <Message \n\t\t\t\t\t\t\t\t  key={`${userId}_${index}`}\n\t\t\t\t\t\t\t\t  userId={userId}\n\t\t\t\t\t\t\t\t  myId={myId}\n\t\t\t\t\t\t\t\t  text={message}\n\t\t\t\t\t\t\t\t  showName={!index || messages[index - 1].userId !== userId}\n\t\t\t\t\t\t\t  />\n\t\t\t\t\t\t\t )}\n\t\t\t<div ref={messagesEndRef} />\n\t\t\t</List>\n\t\t\t<Stack direction=\"row\" className={style.Chat__input}>\n\t\t\t\t<TextField \n\t\t\t\t\tclassName={style.Chat__input__textfield}\n\t\t\t\t\tonChange={onChange} \n\t\t\t\t\tvalue={input} \n\t\t\t\t\t//placeholder=\"메시지를 입력하세요.\"\n\t\t\t\t\tonKeyPress={handleKeyPress}\n\t\t\t\t\tmultiline\n\t\t\t\t\tminRows={1}\n\t\t\t\t\tmaxRows={5}\n\t\t\t\t\tstyle={{ height: inputHeight }}\n\t\t\t\t\t\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tendAdornment: (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={onClick}\n\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tclassName={style.Chat__input__button}\n\t\t\t\t\t\t\tsx={{ minWidth: '2rem', minHeight: '2rem', position: 'absolute', right: '5px', bottom: '12px' }}\n\t\t\t\t\t\t>\t<FiSend color=\"grey\"/>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t  )\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\tclassName={style.Chat__button_restart}\n\t\t\t\t\tsx={{ minWidth: '2rem', minHeight: '2rem', position: 'absolute', right: '50%', transform: 'translateX(50%)',top: '-50px' }}\n\t\t\t\t>\n\t\t\t\t\tRESTART\n\t\t\t\t</Button>\n\t\t\t</Stack>\n        </Container>\n    )\n}\n\nexport default Chat;"],"mappings":"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"},"metadata":{},"sourceType":"module"}